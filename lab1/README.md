# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** Получить знания и навыки разработки драйверов символьных устройств для операционной системы Linux.

## Описание функциональности драйвера

+ При записи текста в файл символьного устройства(устройство `/dev/var4`) запоминается количество пробелов во введенном тексте.
+ Последовательность полученных результатов работы модуля с момента его загрузки можно получить при чтении файла `/proc/var4`.
+ Также последовательнсоть результатов можно получить при чтении из символьного устройство, в таком случае результат будет выведен в кольцевой буфер ядра.

## Инструкция по сборке
### Первоначальная настройка системы:

 ```
    sudo apt-get install make
    sudo apt install linux-headers-$(uname -r)
 ```

### Сборка модуля
``` 
    sudo sh build.sh
```

## Инструкция пользователя
### Работа с помощью консоли
Запись в файл символьного устройства:
```
echo "enter your message here" > /dev/var4
```
Чтение из файла символьного устройства:
```
cat /dev/var4
dmesg # Поскольку ответ пишется в кольцевой буфер, необходимо его читать командой
```
Чтение результатов из файла procfs:
```
cat /proc/var4
```

## Примеры использования

```Commands
mint_console$ echo "1 2 3 4 5 6 7 8 9" > /dev/var4
mint_console$ echo "1 2 3 4 5 6 7 8 9" > /dev/var4
mint_console$ echo "1 2 3 5 6 7 8 9" > /dev/var4
mint_console$ echo "1 2 3 7 8 9" > /dev/var4
mint_console$ echo "89" > /dev/var4
```
```Output from procfs
mint_console$ cat /proc/var4
buf: 0, 5, 7, 8, 8
```
```Output from devfs
mint_console$ cat /dev/var4
mint_console$ dmesg
[ 3223.082799] BUFFER INFORMATION HERE (indexing from the last):
[ 3223.082808] 1: 0
[ 3223.082815] 2: 5
[ 3223.082817] 3: 7
[ 3223.082819] 4: 8
```

